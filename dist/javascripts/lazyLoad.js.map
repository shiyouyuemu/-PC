{"version":3,"sources":["lazyLoad.js"],"names":["factory","define","amd","jQuery","LazyLoad","$","fn","lazyLoad","options","init","extend","prototype","this","undefined","ifloading","cont","templates","li","typeList","showArray","ifAdd","isDown","start","nameList","bindEvent","liststart","bind","setTimeout","_","window","on","list","nowScroll","document","scrollTop","wheight","height","i","length","top","push","offset","attr","ifLoad","forEach","item","img","Image","src","find","rend","last","rending"],"mappings":"cAAA,SAAWA,GACe,mBAAXC,QAAyBA,OAAOC,IAD9CD,OAAUD,CAAAA,UAASA,GAEZC,EAAQE,QAFhB,CAIQH,SAAQG,GAGZ,SAAAC,KAFCC,EAAAC,GAAAC,SAAA,SAAAC,IACF,IAAAJ,GAAaK,KAAAD,IAMZH,EAAEK,OAAON,EAASO,UAAW,CAD7BF,KAASL,SAAaI,GAGdA,IAAUI,KAAKJ,QAAUA,GAFJK,MAApBT,EAASO,UAAWC,KAAAE,UAAAN,EAAAM,UAAAF,KAAAE,WAAA,EACnBN,EAAAO,OAAUP,KAAVO,KAAmBP,EAAAO,MACrBP,EAAUQ,YAAAJ,KAAeJ,UAAzBA,EAAAQ,WACAR,EAAQM,WAAWD,KAAAA,SAAUL,EAAKM,UAClCN,EAAAS,KAAcL,KAAKG,GAAKP,EAAQO,IAChCP,EAAQQ,MAAUJ,KAAKI,MAAAA,EAAUR,MAAQQ,KAAAA,OAAzC,EACAR,KAAQU,QAAS,EACjBV,KAAAW,UAAqBX,GACrBA,KAAQY,SAAWA,GACdC,KAALC,MAAA,EACKH,KAAAA,UAAL,EACKI,KAAAA,MAAL,EACKD,KAALE,YACKC,WAAYb,KAAjBL,SAAAmB,KAAAd,MAAA,MAGAe,UAAW,WAhBU,IAAAC,EAAAhB,KAmBzBY,EAASK,QAAEC,GAAA,SAAA,WACCF,EAARrB,cAEIqB,SAAA,WADJhB,KAAAmB,KAAA1B,EAAAO,KAAAK,IArBqBL,KAAAoB,UAAA3B,EAAA4B,UAAAC,YAyBjBtB,KAAEuB,QAAA9B,EAAAwB,QAAYO,SACbL,IAAL,IAAcM,EAAKpB,KAAnBQ,UAAAY,EAAAzB,KAAAmB,KAAAO,OAAAD,IAEAhC,EAAgBO,KAACiB,KAAQO,IAAAA,SAAzBG,KAAA3B,KAAAoB,UAAApB,KAAAuB,UACkBV,KAAAA,UAAee,KAAKT,KAAKO,KAAAA,IAEvBD,KAAII,SAASF,KAAzBlC,EAAgCO,KAAKoB,KAAAA,IAALU,KAAiB,cACjD9B,KAAAa,aAKH,EAAAb,KAAAO,UAAAmB,QAAA1B,KAAAO,UAAAmB,QAAA1B,KAAAmB,KAAAO,QACJ1B,KAAA+B,UAEGA,OAAKA,WACR/B,KAAAS,SAzCoBT,KAAAO,UAAAyB,QAAA,SAAAC,GA2CjB,IAAAC,EAAY,IAAAC,MACN1B,EAAQ2B,IAAA3C,EAAAwC,GAAAH,KAAA,YACCE,EAAAA,GAAQK,KAAA,OAAAJ,KAAQ,QAAAC,EAAAE,MACbD,EAAAA,OAAd,WACkBL,EAAAA,GAAKO,KAAA,OAAvBP,KAAA,MAAAI,EAAAE,SAGUH,KAAMI,UADZrC,KAAAsC,OAJRtC,KAAAO,UAAAmB,QAAA1B,KAAAmB,KAAAO,SAaQ1B,KAAKS,QAAO,KAAZ6B,KAAA,WACHtC,KAAAO,UAAAmB,QAAA1B,KAAAmB,KAAAO,QAAA1B,KAAAmB,KAAAoB,OAAAV,SAAAF,IAAA3B,KAAAmB,KAAAoB,OAAAf,UAAAxB,KAAAoB,UAAApB,KAAAuB,UACJvB,KAAAS,QAAA,EACJT,KAAAU,OAAA,GA7DoBjB,EAAA,QAAA0B,KAAA,CA+DpBhB,KAAUH,KAAAG,KACFI,UAALP,KAAyBI,UACzBE,SAAAN,KAAAM,SACAI,MAAAV,KAAAU,MACUS,MAAKnB,KAAAQ,QAEXJ,WAAgBA,WACNX,EAAA,QAAKa,SAHJ,CAICI,KAJD,WAAf,KAOAK,WAAWf,KAAYwC,QAAA1B,KAAAd,MAAA,OACAwC,QAAnB,WAGDxC,KAJHS,QAAA,EAKAM,KAAAA,KAAgByB,EAAAA,KAALnC","file":"lazyLoad.js","sourcesContent":["(function (factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define([\"jquery\"], factory);\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n})(function ($) {\r\n    $.fn.lazyLoad = function (options) {\r\n        new LazyLoad().init(options);\r\n    }\r\n\r\n    function LazyLoad() {}\r\n    $.extend(LazyLoad.prototype, {\r\n        init: function (options) {\r\n            options ? this.options = options : \"\";\r\n            options.ifloading!=undefined?this.ifloading=options.ifloading:this.ifloading=false;\r\n            options.cont ?this.cont=options.cont:\"\";\r\n            options.templates?this.templates=options.templates:\"\";\r\n            options.typeList?this.typeList=options.typeList:\"\";\r\n            options.li?this.li = options.li:\"\";\r\n            options.ifAdd?this.ifAdd=options.ifAdd:this.ifAdd=true;\r\n            this.isDown = false;\r\n            this.showArray = [];\r\n            this.nameList = [];\r\n            this.start = 0;\r\n            this.liststart = 0;\r\n            this.ifgo = true;\r\n            this.bindEvent();\r\n            setTimeout(this.lazyLoad.bind(this), 200);\r\n\r\n        },\r\n        bindEvent: function () {\r\n            var _ = this;\r\n            $(window).on(\"scroll\", function () {\r\n                _.lazyLoad();\r\n            });\r\n        },\r\n        lazyLoad: function () {\r\n            this.list = $(this.li);\r\n            this.nowScroll = $(document).scrollTop();\r\n            this.wheight = $(window).height();\r\n            for (var i = this.liststart; i < this.list.length; i++) {\r\n\r\n                if ($(this.list[i]).offset().top <= this.nowScroll + this.wheight) {\r\n                    //if ($.inArray($(this.list[i]).attr(\"data-name\"), this.nameList) == -1) {\r\n                        this.showArray.push(this.list[i]);\r\n                        this.nameList.push($(this.list[i]).attr(\"data-name\"));\r\n                        this.liststart++;\r\n                    //}\r\n                }\r\n            }\r\n            if (this.showArray.length > 0 && this.showArray.length <= this.list.length) {\r\n                this.ifLoad();\r\n            }\r\n        },\r\n        ifLoad: function () {\r\n            if (!this.isDown) {\r\n                this.showArray.forEach(item => {\r\n                    var img = new Image();\r\n                    img.src = $(item).attr(\"data-img\");\r\n                    if($(item).find(\"img\").attr(\"src\")!=img.src){\r\n                        img.onload = function () {\r\n                            $(item).find(\"img\").attr(\"src\", img.src);            \r\n                        }\r\n                    }\r\n                });\r\n                if(this.ifloading){\r\n                    this.rend();\r\n                }else{\r\n                    if (this.showArray.length == this.list.length){\r\n                        this.isDown=true;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        rend:function(){\r\n            if (this.showArray.length == this.list.length && this.list.last().offset().top+this.list.last().height() <= this.nowScroll + this.wheight) {\r\n                this.isDown = true;\r\n                this.start += 16;\r\n                $(\"body\").list({\r\n                    cont: this.cont,\r\n                    templates: this.templates,\r\n                    typeList: this.typeList,\r\n                    start: this.start,\r\n                    ifAdd:this.ifAdd\r\n                });\r\n                setTimeout(function () {\r\n                    $(\"body\").sendSelf({\r\n                        item: \".item\"\r\n                    });\r\n                }, 500);\r\n                setTimeout(this.rending.bind(this), 500);\r\n            }\r\n        },\r\n        rending: function () {\r\n            this.isDown = false;\r\n            this.list = $(this.li);\r\n        }\r\n    });\r\n});"]}