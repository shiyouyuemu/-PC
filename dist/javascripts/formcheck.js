"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(s){function i(){}s.fn.formcheck=function(t){(new i).init(this,t)},s.extend(i.prototype,{init:function(t,i){this.that=t,this.romList=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","r","s","t","u","v","w","x","y","z"],this.key=[/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/,[/\d/,/[a-zA-Z]/,/[!@#\$%&\*_]/,/^.{6,20}$/]],this.ifOk=[0,0,0,0,0],this.options=i,this.options.account?this.acc=this.options.account:this.ifOk[0]=1,this.options.password?this.pwd=this.options.password:this.ifOk[1]=1,this.options.repassword?this.rpwd=this.options.repassword:this.ifOk[2]=1,this.options.verification?this.ver=this.options.verification:this.ifOk[3]=1,this.options.agree?this.agr=this.options.agree:this.ifOk[4]=1,this.options.randomVerification&&(this.rom=this.options.randomVerification),this.options.cont&&(this.cont=this.options.cont),this.bindEvent(),this.randomVerification(this)},bindEvent:function(){var t=this;this.options.account&&s(this.acc,this.that).on("blur",function(){t.accCheck.bind(this)(t)}),this.options.password&&s(this.pwd,this.that).on("blur",function(){t.pwdCheck.bind(this)(t)}),this.options.repassword&&s(this.rpwd,this.that).on("blur",function(){t.rpwdCheck.bind(this)(t)}),this.options.verification&&s(this.ver,this.that).on("blur",function(){t.verCheck(t)}),this.options.agree&&s(this.agr).on("click",function(){t.agrCheck(t)}),this.options.randomVerification&&s(this.rom,this.that).on("click",function(){t.randomVerification(t)}),this.cont&&s(this.cont).on("click",function(){t.options.account&&t.accCheck.bind(s(t.acc,t.that)[0])(t),t.options.repassword&&t.rpwdCheck.bind(s(t.rpwd,t.that)[0])(t),t.options.verification&&t.verCheck(t),t.options.password&&t.pwdCheck.bind(s(t.pwd,t.that)[0])(t),t.options.agree&&t.agrCheck(t),t.changeIfOk(t),t.randomVerification(t),t.options.verification&&t.verCheck(t)})},accCheck:function(t){t.key[0].test(this.value)?(s(this).css({borderColor:"green"}),t.ifOk[0]=1,0!=s("#atxt").length&&s("#atxt").remove()):(this.value="",s(this).css({borderColor:"red"}),0==s("#atxt").length&&s(t.acc).parentsUntil("li").append(s("<span id='atxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; right:0;'>手机号格式不正确</span>")),t.ifOk[0]=0)},pwdCheck:function(t){var i=0;for(var o in t.key)t.key[1][o].test(this.value)?i++:3===o&&(i=0);i<2?(this.value="",s(this).css({borderColor:"red"}),0==s("#ptxt").length&&s(t.pwd).parentsUntil("li").append(s("<span id='ptxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; right:0;'>密码格式不正确</span>")),t.ifOk[1]=0):(s(this).css({borderColor:"green"}),t.ifOk[1]=1,0!=s("#ptxt").length&&s("#ptxt").remove())},rpwdCheck:function(t){var i=s(t.pwd).val(),o=s(t.rpwd).val();i===o&&""!=o?(s(this).css({borderColor:"green"}),t.ifOk[2]=1,0!=s("#rtxt").length&&s("#rtxt").remove()):(s(this).css({borderColor:"red"}),(t.ifOk[2]=0)==s("#rtxt").length&&s(t.rpwd).parentsUntil("li").append(s("<span id='rtxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; right:0;'>两次密码不相同</span>")))},verCheck:function(t){var i=s(t.ver);t.verCode===i.val()?(i.css({borderColor:"green"}),t.ifOk[3]=1,0!=s("#vtxt").length&&s("#vtxt").remove()):(i.css({borderColor:"red"}),(t.ifOk[3]=0)==s("#vtxt").length&&s(t.ver).parentsUntil("li").append(s("<span id='vtxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; line-height:12px; right:0;'>验证码错误</span>")))},agrCheck:function(t){s(this.agr).prop("checked")?t.ifOk[4]=1:(t.ifOk[4]=0,alert("请同意相关协议后再注册！"))},randomVerification:function(t){var i="",o=s(t.rom);o.text("");for(var n=0;n<8;n++)i+=t.romList[parseInt(35*Math.random())];o.text(i),t.verCode=i},changeIfOk:function(t){var o=0,n=0;s.each(t.ifOk,function(t,i){o+=i,n++}),o===n?s(t.that).attr("ifOk",!0):(s(t.that).attr("ifOk",!1),"true"==s(".register_list").attr("ifCom")&&alert("请先通过人机验证！"))}})});
//# sourceMappingURL=formcheck.js.map
