{"version":3,"sources":["formcheck.js"],"names":["factory","define","amd","jQuery","Formcheck","$","fn","formcheck","options","init","this","extend","prototype","that","romList","key","ifOk","account","acc","pwd","password","rpwd","ver","repassword","agr","verification","rom","cont","agree","bindEvent","randomVerification","_","on","accCheck","bind","pwdCheck","rpwdCheck","verCheck","agrCheck","value","css","borderColor","length","remove","parentsUntil","append","test","k","index","val","verCode","prop","alert","str","text","i","parseInt","Math","random","num","nam","each","item","attr"],"mappings":"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","file":"formcheck.js","sourcesContent":["(function(factory){\r\n    if(typeof define ==\"function\"&&define.amd){\r\n        define([\"jquery\"],factory);\r\n    }else{\r\n        factory(jQuery);\r\n    }\r\n})(function($){\r\n    $.fn.formcheck=function(options){\r\n        new Formcheck().init(this,options);\r\n    }\r\n    function Formcheck(){}\r\n    $.extend(Formcheck.prototype,{\r\n        init:function(that,options){\r\n            this.that=that;\r\n            this.romList=[0,1,2,3,4,5,6,7,8,9,\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"]\r\n            this.key=[/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\\d{8}$/,\r\n                    [/\\d/,/[a-zA-Z]/,/[!@#\\$%&\\*_]/,/^.{6,20}$/]\r\n                    ];\r\n            this.ifOk=[0,0,0,0,0];\r\n            this.options=options;\r\n            this.options.account?this.acc=this.options.account:this.ifOk[0]=1;\r\n            this.options.password?this.pwd=this.options.password:this.ifOk[1]=1;\r\n            this.options.repassword?this.rpwd=this.options.repassword:this.ifOk[2]=1;\r\n            this.options.verification?this.ver=this.options.verification:this.ifOk[3]=1;\r\n            this.options.agree?this.agr=this.options.agree:this.ifOk[4]=1;\r\n            this.options.randomVerification?this.rom=this.options.randomVerification:\"\";\r\n            this.options.cont?this.cont=this.options.cont:\"\";\r\n            this.bindEvent();\r\n            this.randomVerification(this);\r\n        },\r\n        bindEvent:function(){\r\n            var _=this;\r\n            this.options.account?$(this.acc,this.that).on(\"blur\",function(){\r\n                _.accCheck.bind(this)(_);\r\n            }):\"\";\r\n            this.options.password?$(this.pwd,this.that).on(\"blur\",function(){\r\n                _.pwdCheck.bind(this)(_);\r\n            }):\"\";\r\n            this.options.repassword?$(this.rpwd,this.that).on(\"blur\",function(){\r\n                _.rpwdCheck.bind(this)(_);\r\n            }):\"\";\r\n            this.options.verification?$(this.ver,this.that).on(\"blur\",function(){\r\n                _.verCheck(_);\r\n            }):\"\";\r\n            this.options.agree?$(this.agr).on(\"click\",function(){\r\n                _.agrCheck(_);\r\n            }):\"\";\r\n            this.options.randomVerification?$(this.rom,this.that).on(\"click\",function(){\r\n               _.randomVerification(_);\r\n               //_.verCheck(_);\r\n            }):\"\";\r\n            this.cont?$(this.cont).on(\"click\",function(){\r\n                _.options.account?_.accCheck.bind($(_.acc,_.that)[0])(_):\"\";\r\n                _.options.repassword?_.rpwdCheck.bind($(_.rpwd,_.that)[0])(_):\"\";\r\n                _.options.verification?_.verCheck(_):\"\";\r\n                _.options.password?_.pwdCheck.bind($(_.pwd,_.that)[0])(_):\"\";\r\n                _.options.agree?_.agrCheck(_):\"\";\r\n                _.changeIfOk(_);\r\n                _.randomVerification(_);\r\n                _.options.verification?_.verCheck(_):\"\";\r\n            }):\"\";\r\n        },\r\n        accCheck:function(_){\r\n            if(!_.key[0].test(this.value)){\r\n                this.value=\"\";\r\n                $(this).css({\r\n                    borderColor:\"red\"\r\n                });\r\n                $(\"#atxt\").length!=0?\"\":$(_.acc).parentsUntil(\"li\").append($(\"<span id='atxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; right:0;'>手机号格式不正确</span>\"));\r\n                _.ifOk[0]=0;\r\n            }else{\r\n                $(this).css({\r\n                    borderColor:\"green\"\r\n                });\r\n                _.ifOk[0]=1;\r\n                $(\"#atxt\").length!=0?$(\"#atxt\").remove():\"\";\r\n            }\r\n            //_.changeIfOk(_);\r\n        },\r\n        pwdCheck:function(_){\r\n            var k=0;\r\n            for (var index in _.key) {\r\n                if (_.key[1][index].test(this.value)) {\r\n                    k++;\r\n                }else{\r\n                    if(index===3){\r\n                        k=0;\r\n                    }\r\n                }\r\n\r\n            }\r\n            if(k<2){\r\n                this.value=\"\";\r\n                $(this).css({\r\n                    borderColor:\"red\"\r\n                });\r\n                $(\"#ptxt\").length!=0?\"\": $(_.pwd).parentsUntil(\"li\").append($(\"<span id='ptxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; right:0;'>密码格式不正确</span>\"));\r\n                _.ifOk[1]=0;\r\n            }else{\r\n                $(this).css({\r\n                    borderColor:\"green\"\r\n                });\r\n                _.ifOk[1]=1;\r\n                $(\"#ptxt\").length!=0?$(\"#ptxt\").remove():\"\";\r\n            }\r\n            //_.changeIfOk(_);\r\n        },\r\n        rpwdCheck:function(_){\r\n            var pwd=$(_.pwd).val();\r\n            var rpwd=$(_.rpwd).val();\r\n            if(pwd===rpwd&&rpwd!=\"\"){\r\n                $(this).css({\r\n                    borderColor:\"green\"\r\n                });\r\n                _.ifOk[2]=1;\r\n                $(\"#rtxt\").length!=0?$(\"#rtxt\").remove():\"\";\r\n            }else{\r\n                $(this).css({\r\n                    borderColor:\"red\"\r\n                });\r\n                _.ifOk[2]=0;\r\n                $(\"#rtxt\").length!=0?\"\":$(_.rpwd).parentsUntil(\"li\").append($(\"<span id='rtxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; right:0;'>两次密码不相同</span>\"));\r\n            }\r\n           // _.changeIfOk(_);\r\n        },\r\n        verCheck:function(_){\r\n            var ver=$(_.ver);\r\n            if(_.verCode===ver.val()){\r\n                ver.css({\r\n                    borderColor:\"green\"\r\n                });\r\n                _.ifOk[3]=1;\r\n                $(\"#vtxt\").length!=0?$(\"#vtxt\").remove():\"\";\r\n            }else{\r\n                ver.css({\r\n                    borderColor:\"red\"\r\n                });\r\n                _.ifOk[3]=0;\r\n                $(\"#vtxt\").length!=0?\"\": $(_.ver).parentsUntil(\"li\").append($(\"<span id='vtxt' style='color:red;font-size:12px; position:absolute;bottom:-14px;background:none; line-height:12px; right:0;'>验证码错误</span>\"));\r\n            }\r\n           // _.changeIfOk(_);\r\n        },\r\n        agrCheck:function(_){\r\n            if($(this.agr).prop(\"checked\")){\r\n                _.ifOk[4]=1;\r\n            }else{\r\n                _.ifOk[4]=0;\r\n                alert(\"请同意相关协议后再注册！\");\r\n            }\r\n        },\r\n        randomVerification:function(_){\r\n            \r\n            var str=\"\";\r\n            var rom=$(_.rom);\r\n            rom.text(\"\");\r\n            for(var i=0;i<8;i++){\r\n                str+=_.romList[parseInt(Math.random()*35)];\r\n            }\r\n            rom.text(str);\r\n            _.verCode=str;\r\n            \r\n        },\r\n        changeIfOk:function(_){\r\n            var num=0;\r\n            var nam=0;\r\n            $.each(_.ifOk,((index,item)=>{\r\n                num+=item;\r\n                nam++;\r\n            }));\r\n            if(num===nam){\r\n                $(_.that).attr(\"ifOk\",true);\r\n            }else{\r\n                $(_.that).attr(\"ifOk\",false);\r\n                if($(\".register_list\").attr(\"ifCom\")==\"true\"){\r\n                    alert(\"请先通过人机验证！\");\r\n                }\r\n            }\r\n            \r\n        }\r\n    })\r\n})"]}