{"version":3,"sources":["autoLogin.js"],"names":["factory","define","amd","jQuery","AutoLogin","$","fn","autoLogin","options","init","this","extend","prototype","that","autolog","str","location","search","removeItem","window","name","split","localStorage","cookie","login_cookie","decodeURIComponent","JSON","parse","ajax","dataType","type","data","username","password","success","res","code","html","concat","cont","console","log","e"],"mappings":"cAAA,SAAWA,GACe,mBAAXC,QAAyBA,OAAOC,IAD9CD,OAAUD,CAAAA,SAAS,UAAAA,GAEZC,EAAQE,QAFhB,CAIQH,SAAQG,GAGZ,SAAAC,KAFCC,EAAAC,GAAAC,UAAA,SAAAC,IACF,IAAAJ,GAAaK,KAAAC,KAAAF,IAMZH,EAAEM,OAAOP,EAAUQ,UAAW,CAD9BH,KAASL,SAAcS,EAAAL,GAGfE,KAAKG,KAAOA,EAFXT,KAAAA,QAAUQ,EACTF,KAAAI,UACGD,IAALE,EAAYF,OAAZG,SAAAC,OACA,IAAKT,EACAM,aAALI,WAAAC,OAAAC,MAEW,YAGGL,EAAIM,MAAM,KAAK,GAAGA,MAAM,KAAK,IAF3BC,aAAYH,WAAxBA,OAAAC,OAGAN,QAAQ,WACJQ,IAAAA,EAAaJ,KAChB,GAAAb,EAAAkB,OAAA,UAAA,CACJC,EAAAnB,EAAAkB,OAAA,UAbqB,IAAAV,EAAAR,EAAAK,KAAAG,MAenBW,EAAEC,mBAAYD,GACbA,IACCD,GAKDC,EAAeE,KAAKC,MAAMH,GALR,CAENnB,EAACuB,KAAKf,CACPY,IAFMF,qCASTM,SAAU,OANlBC,KAAA,MACYC,KAAQJ,CAQRK,SAAUR,EAAaQ,SAPjBC,SAAAT,EAAAS,SACJH,KAAW,UACdI,QAAA,SAAAC,GAAA,GAAAA,EAAAC,OAIGvB,EAAAwB,KAAA,MAAAC,OAAAd,EAAAQ,SAAA,6BACQR,EAAY,QAACQ,SADrB,CAEqBC,KAAAA,mBAQXM,MAAAA,GADeC,QAAnBC,IAAAC","file":"autoLogin.js","sourcesContent":["(function (factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define([\"jquery\",\"cookie\"], factory);\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n})(function ($) {\r\n    $.fn.autoLogin = function (options) {\r\n        new AutoLogin().init(this, options);\r\n    }\r\n\r\n    function AutoLogin() {}\r\n    $.extend(AutoLogin.prototype, {\r\n        init: function (that, options) {\r\n            this.that = that;\r\n            this.options = options;\r\n            this.autolog();\r\n            var str=window.location.search;\r\n            if(str==\"\"){\r\n                localStorage.removeItem(window.name)\r\n            }else{\r\n                var tname=str.split(\"=\")[0].split(\"?\")[1];\r\n                if(tname==\"typename\"){\r\n                    localStorage.removeItem(window.name)\r\n                }\r\n            }\r\n        },\r\n        autolog: function () { \r\n            var login_cookie=null;\r\n            if($.cookie(\"usrmsg\")){\r\n                login_cookie = $.cookie(\"usrmsg\");\r\n                var that = $(this.that);\r\n            login_cookie = decodeURIComponent(login_cookie);\r\n            try {\r\n                login_cookie = JSON.parse(login_cookie);\r\n                if (login_cookie) {\r\n                    var src = \"/lophp\" + \"/ciyuancang/server/login.php\"; \r\n                    $.ajax({\r\n                        url: src,\r\n                        dataType: \"json\",\r\n                        type: \"get\",\r\n                        data: {\r\n                            username: login_cookie.username,\r\n                            password: login_cookie.password,\r\n                            type: \"cookie\"\r\n                        },\r\n                        success: function (res) {\r\n                            //res = JSON.parse(res);\r\n                            if (res.code == 1) {\r\n                                that.html(`<a>${login_cookie.username}</a><a id=\"out\">退出登录</a>`);\r\n                                    $(\"#out\").outLogin({\r\n                                        cont: \"#username\"\r\n                                    });\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            \r\n             catch (e) {\r\n                console.log(e);\r\n            }\r\n        }\r\n        }\r\n    });\r\n});"]}